<div class="register-wrapper">
  <div class="register-container">

    <div class="register-heading">
      Crea una cuenta
    </div>

    <!-- üî¥ MENSAJE GENERAL BACKEND -->
    <div class="error" *ngIf="mensajeGeneral">
      {{ mensajeGeneral }}
    </div>

    <form [formGroup]="form" (ngSubmit)="register()">

      <!-- NOMBRE -->
      <input
        class="register-input"
        type="text"
        formControlName="nombre"
        placeholder="Nombre completo"
        [class.invalid]="
          errores['nombre'] ||
          (form.get('nombre')?.touched && form.get('nombre')?.invalid)
        "
      />
      <!-- üî¥ ERROR NOMBRE: backend o frontend -->
      <div class="error" *ngIf="errores['nombre']">
        {{ errores['nombre'] }}
      </div>
      <div class="error" *ngIf="!errores['nombre'] && form.get('nombre')?.touched && form.get('nombre')?.invalid">
        Nombre obligatorio y m√≠nimo 3 caracteres
      </div>

      <!-- EMAIL -->
      <input
        class="register-input"
        type="email"
        formControlName="email"
        placeholder="correo@email.com"
        [class.invalid]="
          errores['email'] ||
          (form.get('email')?.touched && form.get('email')?.invalid)
        "
      />
      <!-- üî¥ ERROR EMAIL: backend o frontend -->
      <div class="error" *ngIf="errores['email']">
        {{ errores['email'] }}
      </div>
      <div class="error" *ngIf="!errores['email'] && form.get('email')?.touched && form.get('email')?.invalid">
        Email inv√°lido
      </div>

      <!-- CONTRASE√ëA -->
      <div class="password-field">
        <input
          class="register-input"
          [type]="showPassword ? 'text' : 'password'"
          formControlName="password"
          placeholder="Contrase√±a"
          [class.invalid]="errores['password'] || (form.get('password')?.touched && form.get('password')?.invalid)"
        />
        <img
          class="toggle-password-icon"
          src="/icons/ojo.png"
          alt="Ver contrase√±a"
          (click)="togglePassword()"
        />
        <div class="error" *ngIf="errores['password']">
          {{ errores['password'] }}
        </div>
        <div class="error" *ngIf="!errores['password'] && form.get('password')?.touched && form.get('password')?.invalid">
          Contrase√±a debe tener m√≠nimo 8 caracteres, may√∫sculas, min√∫sculas, n√∫meros y s√≠mbolos
        </div>
      </div>

      <!-- CONFIRMAR CONTRASE√ëA -->
      <div class="password-field">
        <input
          class="register-input"
          [type]="showConfirmPassword ? 'text' : 'password'"
          formControlName="confirmPassword"
          placeholder="Confirmar contrase√±a"
          [class.invalid]="errores['confirmPassword'] || (form.get('confirmPassword')?.touched && form.get('confirmPassword')?.invalid)"
        />
        <img
          class="toggle-password-icon"
          src="/icons/ojo.png"
          alt="Ver contrase√±a"
          (click)="toggleConfirmPassword()"
        />
        <div class="error" *ngIf="errores['confirmPassword']">
          {{ errores['confirmPassword'] }}
        </div>
        <div class="error" *ngIf="!errores['confirmPassword'] && form.get('confirmPassword')?.touched && form.get('confirmPassword')?.invalid">
          Debes confirmar la contrase√±a
        </div>
      </div>

      <!-- T√âRMINOS -->
      <label class="register-terms">
        <input type="checkbox" formControlName="acceptTerms" />
        <span>
          Acepto los
          <a href="#">T√©rminos y condiciones</a>
        </span>
      </label>
      <div class="error" *ngIf="form.get('acceptTerms')?.touched && form.get('acceptTerms')?.invalid">
        Debes aceptar los t√©rminos
      </div>

      <!-- BOT√ìN -->
      <button class="register-button" type="submit">
        Crear cuenta
      </button>

      <!-- FOOTER -->
      <p class="register-footer">
        ¬øYa tienes cuenta?
        <a (click)="goToLogin()">Inicia sesi√≥n</a>
      </p>

    </form>

  </div>
</div>
