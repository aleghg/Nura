<header class="shop-header">
  <div class="inner">

    <!-- LOGO -->
    <div class="logo" routerLink="/shop">N√úRA</div>

    <div class="shop-actions">

      <!-- üîì NO LOGUEADO -->
      <ng-container *ngIf="!auth.isAuthenticated()">
        <button (click)="openLogin()">Ingresar</button>
      </ng-container>

      <!-- üë§ CLIENTE -->
      <ng-container *ngIf="auth.getRol() === 'CLIENTE' && usuario">

        <!-- PERFIL -->
        <button routerLink="/perfil" class="profile-btn" title="Ver perfil">
          <img src="/icons/perfil.png" alt="Perfil" class="profile-icon" />
        </button>

        <!-- CARRITO CON DROPDOWN -->
        <div class="cart-dropdown" (mouseenter)="dropdownOpen = true" (mouseleave)="dropdownOpen = false">
          <button class="cart-btn" title="Carrito">
            <img src="/icons/carrito-de-compras.png" class="cart-icon" />
            <span class="cart-count" [class.bump]="animarCarrito">{{ carritoCantidad }}</span>
          </button>

          <!-- MENU DROPDOWN -->
          <div class="cart-menu" *ngIf="dropdownOpen && carritoCantidad > 0">
            <div class="cart-item" *ngFor="let item of cartItems">
              <img [src]="item.imagen" alt="{{ item.nombre }}" />
              <div class="item-info">
                <span>{{ item.nombre }}</span>
                <span>{{ item.cantidad }} x ${{ item.precio }}</span>
              </div>
            </div>
            <div class="cart-footer">
              <span>Total: ${{ totalCarrito }}</span>
              <button routerLink="/carrito" class="view-cart-btn">Ver carrito</button>
            </div>
          </div>
        </div>

        <!-- SALIR -->
        <button (click)="logout()">Salir</button>
      </ng-container>

      <!-- üëë ADMIN -->
      <ng-container *ngIf="auth.getRol() === 'ADMIN'">
        <button routerLink="/admin/productos">Productos</button>
        <button routerLink="/admin/categorias">Categor√≠as</button>
        <button routerLink="/admin/usuarios">Usuarios</button>
        <button (click)="logout()">Salir</button>
      </ng-container>

    </div>

  </div>
</header>
